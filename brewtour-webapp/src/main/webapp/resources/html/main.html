<div ng-controller="MapController">
	<div ng-if="user">
		<button class="btn btn-xs">logout</button>
		{{user.identifier}}, {{user.login}}
	</div>
	<div>
		<span ng-if="user">
			{{user.identifier}}, {{user.login}}
		</span>
		<span ng-if="!user.admin">
			<button class="btn btn-xs">login</button>
		</span>
		<span ng-if="user.admin">
			<button class="btn btn-xs">logout</button>
		</span>
	</div>
	<div>
		<div class="hidden-md hidden-lg" ng-if="locationDetails">
			<img ng-src='{{locationDetails.images.medium}}'>
		</div>
		<div class="hidden-xs hidden-sm" ng-if="locationDetails"
			style="float: left; width: 400px;">
			<img ng-src='{{locationDetails.images.medium}}'
				ng-if="locationDetails.images">
<!-- 
			<span style="float: right;" ><button class="btn btn-xs" ng-if="admin" 
				data-toggle="modal" data-target="#editLocationModal">Edit</button></span>
 -->
			<h3>
				{{locationDetails.name}} 
				<span class="glyphicon glyphicon-star"
					aria-hidden="true" style="float: right; color: gold;"
					ng-if="isFavorite(locationDetails.identifier)" 
					ng-click="removeFavorite(locationDetails.identifier)"></span>
				<span class="glyphicon glyphicon-star-empty" aria-hidden="true"
					style="float: right" 
					ng-if="!isFavorite(locationDetails.identifier)"
					ng-click="addFavorite(locationDetails.identifier)"></span>
				<span class="glyphicon glyphicon-pencil" aria-hidden="true" style="float: right; color: #0000A5; margin-right: 10px;"
					data-toggle="modal" data-target="#editLocationModal"></span>
			</h3>
			<p>{{locationDetails.description}}</p>
			<table ng-if="locationDetails.beers.length > 0" style="width: 100%;">
				<tr>
					<th></th>
					<th ng-if="hasAbv">ABV</th>
					<th ng-if="hasIbu">IBU</th>
					<th ng-if="admin"></th>
				</tr>
				<tr ng-repeat="beer in locationDetails.beers">
					<td ng-if="!beerRemoved(beer.name)">{{beer.name}}</td>
					<td ng-if="beerRemoved(beer.name)"><strike>{{beer.name}}</strike></td>
					<td ng-if="hasAbv"><span ng-if="beer.abv && !beerRemoved(beer.name)">{{beer.abv}}%</span></td>
					<td ng-if="hasIbu"><span ng-if="beer.ibu && !beerRemoved(beer.name)">{{beer.ibu}}</span></td>
					<td ng-if="admin && !beerRemoved(beer.name)"><a style="color: red;" ng-click="removeBeer(beer.name)"><span class="glyphicon glyphicon-remove" aria-hidden="true"></span></a></td>
					<td ng-if="admin && beerRemoved(beer.name)"><a style="color: grey;" ng-click="reinstateBeer(beer.name)"><span class="glyphicon glyphicon-remove-sign" aria-hidden="true"></span></a></td>
				</tr>
			</table>
			<pre ng-if="debug">{{debug | json}}</pre>
		</div>
		<div id="map"></div>
	</div>

	<div class="modal fade" id="editLocationModal" >
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title">Correct Brewery</h4>
				</div>
				<div class="modal-body">
					<h3>{{locationDetails.name}}</h3>
					<p>Have details? Help us keep track of local breweries with your comments!</p>
					<textarea rows="4" cols="50" ng-model="locationDetailsComment"></textarea>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
					<button type="button" class="btn btn-primary" ng-click="sendComment()">Send details</button>
				</div>
			</div>
		</div>
	</div>
	
</div>